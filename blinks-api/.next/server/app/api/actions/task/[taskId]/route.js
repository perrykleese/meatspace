"use strict";(()=>{var e={};e.id=507,e.ids=[507],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},1041:e=>{e.exports=require("node:url")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},7561:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>D,originalPathname:()=>b,patchFetch:()=>g,requestAsyncStorage:()=>y,routeModule:()=>k,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var a={};r.r(a),r.d(a,{GET:()=>p,OPTIONS:()=>d});var o=r(5419),s=r(9108),n=r(9678),i=r(2306),u=r(8070),c=r(9015),l=r(212);async function p(e,{params:t}){try{let e=await (0,c._)(t.taskId);if(!e||"open"!==e.status){let t={type:"action",icon:`${l.e}/icon-error.png`,title:"Task Not Available",description:e?`This task is ${e.status}`:"Task not found",label:"Unavailable",disabled:!0,links:{actions:[]}};return u.Z.json(t,{headers:i.jS})}let r={type:"action",icon:`${l.e}/api/og/task/${e.id}.png`,title:`${{verification:"\uD83D\uDCF8",delivery:"\uD83D\uDCE6",inspection:"\uD83D\uDD0D",survey:"\uD83D\uDCCB",mystery_shop:"\uD83D\uDD75Ô∏è",photography:"\uD83D\uDCF7",data_collection:"\uD83D\uDCCA",other:"\uD83D\uDCDD"}[e.category]||"\uD83D\uDCDD"} ${e.title}`,description:function(e){let t=[e.description];return e.location?.city&&t.push(`üìç ${e.location.city}`),t.push(`‚è∞ ${function(e){let t=new Date,r=e.getTime()-t.getTime();if(r<0)return"Expired";let a=Math.floor(r/36e5),o=Math.floor(a/24);return o>0?`${o}d left`:a>0?`${a}h left`:`${Math.floor(r/6e4)}m left`}(e.deadline)}`),e.workersNearby&&t.push(`üë• ${e.workersNearby} workers nearby`),t.join(" ‚Ä¢ ")}(e),label:`Claim ($${e.bounty.amount} ${e.bounty.currency})`,disabled:!1,links:{actions:[{label:`üéØ Claim ($${e.bounty.amount})`,href:`/api/actions/task/${e.id}/claim`,type:"transaction"},{label:"\uD83D\uDCCD View on Map",href:`${l.e}/task/${e.id}`,type:"external-link"}]}};return u.Z.json(r,{headers:i.jS})}catch(e){return console.error("Error fetching task:",e),u.Z.json({error:"Failed to fetch task"},{status:500,headers:i.jS})}}async function d(){return new u.Z(null,{status:204,headers:i.jS})}let k=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/actions/task/[taskId]/route",pathname:"/api/actions/task/[taskId]",filename:"route",bundlePath:"app/api/actions/task/[taskId]/route"},resolvedPagePath:"/Users/perrykleese/Projects/meatspace/blinks-api/src/app/api/actions/task/[taskId]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:D,staticGenerationBailout:f}=k,b="/api/actions/task/[taskId]/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},212:(e,t,r)=>{r.d(t,{Rn:()=>a,e:()=>s,mv:()=>o});let a=process.env.PROGRAM_ID||"MeatSpaceProtoco1111111111111111111111111111",o=process.env.SOLANA_RPC_URL||"https://api.devnet.solana.com",s=process.env.NEXT_PUBLIC_URL||"https://meatspace.work"},9015:(e,t,r)=>{r.d(t,{C:()=>i,_:()=>n});var a=r(4342),o=r(212);let s={task_demo1:{id:"task_demo1",taskIdNum:1,agentPubkey:"11111111111111111111111111111111",title:"Photograph storefront at 456 Oak St",description:"Take a clear photo of the business sign and entrance during business hours. Verify the store is open.",category:"verification",status:"open",bounty:{amount:"25.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.2672,lng:-97.7431,radiusMeters:50},deadline:new Date(Date.now()+864e5),maxWorkers:1,currentWorkers:0,workersNearby:3,createdAt:new Date},task_demo2:{id:"task_demo2",taskIdNum:2,agentPubkey:"11111111111111111111111111111111",title:"Pick up package from downtown office",description:"Pick up a small envelope from the lobby desk at 100 Congress Ave and deliver to Suite 400 at 200 Congress Ave.",category:"delivery",status:"open",bounty:{amount:"40.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.2649,lng:-97.7428,radiusMeters:500},deadline:new Date(Date.now()+144e5),maxWorkers:1,currentWorkers:0,workersNearby:7,createdAt:new Date},task_demo3:{id:"task_demo3",taskIdNum:3,agentPubkey:"11111111111111111111111111111111",title:"Survey local coffee shop prices",description:"Visit 3 coffee shops within 1 mile and record the prices for: small drip coffee, medium latte, large cold brew.",category:"survey",status:"open",bounty:{amount:"15.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.27,lng:-97.74,radiusMeters:1609},deadline:new Date(Date.now()+1728e5),maxWorkers:3,currentWorkers:1,workersNearby:12,createdAt:new Date}};async function n(e){if(s[e])return s[e];try{return new a.ew(o.mv,"confirmed"),new a.nh(o.Rn),e.match(/^task_(.+)$/),null}catch(e){return console.error("Error fetching task from chain:",e),null}}async function i(e){let t=Object.values(s);return e?.status&&(t=t.filter(t=>t.status===e.status)),e?.category&&(t=t.filter(t=>t.category===e.category)),e?.limit&&(t=t.slice(0,e.limit)),t}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206,986],()=>r(7561));module.exports=a})();