"use strict";(()=>{var e={};e.id=546,e.ids=[546],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},1041:e=>{e.exports=require("node:url")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},1497:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>k,originalPathname:()=>v,patchFetch:()=>w,requestAsyncStorage:()=>y,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>g});var o={};r.r(o),r.d(o,{GET:()=>p,OPTIONS:()=>d});var a=r(5419),s=r(9108),n=r(9678),i=r(2306),u=r(8070),c=r(9015),l=r(212);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("near"),o=t.get("category"),a=await (0,c.C)({status:"open",category:o||void 0,limit:5}),s=a.length>0?a.slice(0,3).map(e=>`â€¢ $${e.bounty.amount} - ${e.title}`).join("\n")+(a.length>3?`
+${a.length-3} more`:""):"No tasks available in your area right now.",n={type:"action",icon:`${l.e}/api/og/feed.png`,title:`ðŸ¥© Tasks Near ${r||"your area"}`,description:s,label:"Browse Tasks",disabled:0===a.length,links:{actions:a.slice(0,3).map(e=>({type:"post",label:`ðŸŽ¯ $${e.bounty.amount} - ${e.title.slice(0,30)}...`,href:`/api/actions/task/${e.id}`}))}};return u.Z.json(n,{headers:i.jS})}catch(e){return console.error("Error fetching feed:",e),u.Z.json({error:"Failed to fetch tasks"},{status:500,headers:i.jS})}}async function d(){return new u.Z(null,{status:204,headers:i.jS})}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/actions/feed/route",pathname:"/api/actions/feed",filename:"route",bundlePath:"app/api/actions/feed/route"},resolvedPagePath:"/Users/perrykleese/Projects/meatspace/blinks-api/src/app/api/actions/feed/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:k,staticGenerationBailout:g}=m,v="/api/actions/feed/route";function w(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},212:(e,t,r)=>{r.d(t,{Rn:()=>o,e:()=>s,mv:()=>a});let o=process.env.PROGRAM_ID||"MeatSpaceProtoco1111111111111111111111111111",a=process.env.SOLANA_RPC_URL||"https://api.devnet.solana.com",s=process.env.NEXT_PUBLIC_URL||"https://meatspace.work"},9015:(e,t,r)=>{r.d(t,{C:()=>i,_:()=>n});var o=r(4342),a=r(212);let s={task_demo1:{id:"task_demo1",taskIdNum:1,agentPubkey:"11111111111111111111111111111111",title:"Photograph storefront at 456 Oak St",description:"Take a clear photo of the business sign and entrance during business hours. Verify the store is open.",category:"verification",status:"open",bounty:{amount:"25.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.2672,lng:-97.7431,radiusMeters:50},deadline:new Date(Date.now()+864e5),maxWorkers:1,currentWorkers:0,workersNearby:3,createdAt:new Date},task_demo2:{id:"task_demo2",taskIdNum:2,agentPubkey:"11111111111111111111111111111111",title:"Pick up package from downtown office",description:"Pick up a small envelope from the lobby desk at 100 Congress Ave and deliver to Suite 400 at 200 Congress Ave.",category:"delivery",status:"open",bounty:{amount:"40.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.2649,lng:-97.7428,radiusMeters:500},deadline:new Date(Date.now()+144e5),maxWorkers:1,currentWorkers:0,workersNearby:7,createdAt:new Date},task_demo3:{id:"task_demo3",taskIdNum:3,agentPubkey:"11111111111111111111111111111111",title:"Survey local coffee shop prices",description:"Visit 3 coffee shops within 1 mile and record the prices for: small drip coffee, medium latte, large cold brew.",category:"survey",status:"open",bounty:{amount:"15.00",currency:"MEAT"},location:{city:"Austin, TX",lat:30.27,lng:-97.74,radiusMeters:1609},deadline:new Date(Date.now()+1728e5),maxWorkers:3,currentWorkers:1,workersNearby:12,createdAt:new Date}};async function n(e){if(s[e])return s[e];try{return new o.ew(a.mv,"confirmed"),new o.nh(a.Rn),e.match(/^task_(.+)$/),null}catch(e){return console.error("Error fetching task from chain:",e),null}}async function i(e){let t=Object.values(s);return e?.status&&(t=t.filter(t=>t.status===e.status)),e?.category&&(t=t.filter(t=>t.category===e.category)),e?.limit&&(t=t.slice(0,e.limit)),t}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,986],()=>r(1497));module.exports=o})();